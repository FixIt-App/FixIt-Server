language: python
python:
- '3.5'
install: pip install -r requirements.txt
before_script:
- sudo /etc/init.d/postgresql restart
- psql -c 'create database fixit;' -U postgres
env:
  matrix:
  - POSTGRES_DATABASE=fixit POSTGRES_USER=postgres POSTGRES_HOST=localhost PACKAGE_VERSION="1.0.*"
    POSTGRES_PASSWORD=
  global:
  - secure: 0DDyc/l0X2aLwLsZm8tUDB3XzxgAD6VjlrAyKMxFDScY/G/EGWmJLfyeb4xNtj5+QAcf6HYLeI9U/zvnEzvXsPuQUEHYVHw/9nEr+OQv8Z05Bhdpz8IXFlhUu0pPD/sb7zRVI6qSrpr2623+HWflY+4cf57vy0Frn+F0ipnBZpCFx+iHd6ltzHigOcbdBAdcw/IQewOcUHbfDygIpiioMC+emChYW/fGB8eREW/DoSFQgHDRzhPQ6txH9JKbCquDK0v2TSWveO0wxm6ldaGFX1RRUiuMHSfZI4QKvZlkuwvofwTqTWW5940urDSN91XQYoXGZzKA794eccQaEgkO8IoRGjLTtDMk76jO2cM5H98cQt5PJoEdgRH2Bn56kahyCJ2pS7AOgD6UnkpgwItdEq4wVULMMqvhmVjx3wLfEbfzwHRdwysRLH3kYT6sHpXeDeE2+5h6akgHWBSL8V8SYI83W3xJ1hCQPIGZTC4rux8Rro/BJggqC/bfDTbNrNJrjJzXWKflz673nYhEg09JD3sdocHltlMp1apUxWuUcCsmc+NHZwMNVV5KPCdd5QeRIEzrKwA6hUz34z9NMKk7LcoX5ebjuO19crRjIT/+1tO3MY6humnnpNwnomUxiBCyLHdFTQggVmSPHwrosQFC++oExMNIOOJZZEJMZTnI1ag=
  - secure: xYdhTWjz6d6g7nG4EbN9Ec57y5BMEl6n+a2HqT4hp/oGcQ16sOIgcGF8hfHqaxUVYnfZmaYdkN1jZzfKLU7bafI2wuqKfcTMz0iyKEJPqN/yoZWwdN2erFULL/q27NCo6vCGnQx1ln0Ws8H1yvHeBvnSrQx4iHQzrYTc+fKaAUjpsZrV5JzPJXkowyU3nex/ijTbsXNGVs8WAXLyQcNvYj53ka7b00bxWKrMb7PX0B4TI9N6Ol//CwulndUdnLiqu4JZT9MRbzyJkTF405d3K3IwIPq5c150xqV9SDO/N890TyZUcg0hkvgd4dFz6PzY09+06xZiyKjvNAhAGAYWLJ1dL0yMzonoOmAzZUTnigEx4jPbtcaUP5IpjdEtF7MrskXUUVulyJQCeZYKfWTc9kwVpAr2TpjThmEtjqh9uwlfZs4nou3wv08qNTK3fu8ZUfzlgdGAemXGwtmRQ4ifJzC23JZb1xf4TA8q+ebUfWVDtCIwkGBAse5f++M8DfzuQ2WMqn2A5M0rsrp481RK8Ygd7l79KV6XSV4c9vB9blzwjPfPizrGXOaXX3KYxQ+OgORMBAQDWw9D5LPOHUNe4jaDeI/2AG9YVFO2renMIDJtdU4zjl3WmK12ntcJwX1Vc23a5b2FpdE+/CDVc106owO8fDAf1WGDGi9zGcLv/MM=
  - secure: K2u9VOEtwVWKfqXW9Z5rymGS9G2WrPtev+4zNPLhAeVOinAywjLU5gkC/fGeXjb8zue07BS+e9spWCxTw8o1IZzUBevNRbGQMVNLb7hMHYvyZx03I86WWJgv6/IjayQtoZw19KT5+u0pFJGOkp5trPqQ3w/9DvE5aqJF2jl9nT5t66PIbhxmHj/O8R911I1OsVr/nsCcrBi9J6Gc83/RR9t3V/MFg9v+gI8qpyvJPWJl8Qub4ji/IcQ17L1A970qeNgZb9867xuxqDqTsuBTvk7Fr6tgHL0WSFyR3p/MT4KIYgp3XcKPy0W68aO78Dhkt4kKBnSOHcEZTYVWJMrte2Rvv2DTPvTDUC3ITIPUaLArF/TkUxS1BTvy8hD1jHwDuDgH5JCrTWTwMVgcFfR0IcwHgtjKtAZbkCwLwT3/QFpMti4m90LATImm4sKjaQO3ioeJYo/tIS+K/XLKvYshGdBXzFjNefAudGLDCWvlaWr7igi8X1EHbrAkxonr0kIgTRV8oTijMODZOkx0gaNRdAk7t9Cbbb7fGWEGQ5CicA8Aba29kL4ejBmiZWkx+MBUeyseBb4DwjyjSWJqavXFqlDATSwnIGdqYQFrFtq9soDh4Hm7Hl/Ppzw1Ef2lTXZGlHRMbqj9l+MOciAIhLu31kAbwFeuZ/XmJ1D5CRph794=
  - secure: C97Hx2w6ZxlUs+EpIsyA0Zh4hZblItzf/amSWz6JHSUdaRBLBC0PSivJ2v9utDPYXvJrt0fsuPko6JlUt6z7QXxv1w9Mc7Ff/Ks67slTqM1FHxgi4camPFLVC9qc0JG+o4Ua0jLlnM3PElk6lD31K+6ArIxqK20i0mu9xcH44jdKPsStfbDSGIhMmw0iV19Conhb0xjLULxDNx7VpE146htnM28YigGOUW0YEnhLCi2XVFJ1stovm+N5q+O8XbVXO3SUo/q4hVa3B19W//ZAE9PAvnCk3rs8aH4JkqC1EhDQoDcOufPCDatWma9/1OYUkd8kVPjdu46ZnFKuBSoT+a7fDXOaCTIVa3GjfoTe/Q8Pm7ZzH+nGXlpoynnv4z4A8XfzTT35U+Skwq0VGac4FYF5y33xQYCUR3Z7Hg1c8j0NGPS497ZEJ9B6DwysTDaAcWirgUbXP2XDdahGWLsde20VRJlR7mcs0XN9KbOO32FQ/XHGi+xuToRyefHXsNzNPhyao6UtFLZoIDyB3b7Z3ndKOpZClHRnbAzTzWhhD5/P1dtBzXe2lyO9s/MdDcfWBXi3Xb7lvUsCPi6d6Z6p/p0ogOAzOYt1KWEjEwfljAnce+0hWcCyTdsmLkAvzMw64snnaKzyWtJcYg0fXv1YCmHw3souGY3wa6Gv3UVJg0w=
  - secure: ZdVHaNRhdecN1lwvvy3us9gXGfyU1nZY6n4515JZl8SmkhrStlUZKwYTB/U8Y5tHjWLNkR8wHzwQp+9acVvl5ekXIyOaeyNvvOZFq6yRSYT4QnkA5mX3ErgnOM/Rb/1brXGDauPQ7UIk1k1zaPhNlJ4zT3JvJyz/G7A8ePnGjwpGYHpSjmbRNdtZitnhXNPG9I58KYB8eZajnHUPuBz6X4+D3/ow14JCLECeIgVEP01MZ9v2OOmPj0Oa2Wu/Nubvkw9MTeEqCm6DBbEEZIbc32hFCNFtZsr+0EUqXO32rxLBe7XptEdM/4slFsIqXXoXGorzZc3rHE5fGEKyqnuG9nwUkalrJkoPJS6LpsGmadqhZenx0VxLJL7SUSKJDffIgZzKuoOUblX6QIAm9cCorGEIE11hPe5cZowkP961l732ua/QSgMhTt5S6i84ETYyS3uqTAgPGC9wIc95vjcoPonDAEpbkZGY4Mi6/z9U4jfn7nUIZZW8D9fL4ZqevKv2HoPIcwoQdi9nOZfQK9nyDQTv+cANEyIv/AMi5irFL5kB9JRs4+HRjdfz0+uPG+RffGOqLQ3J4KmrARlWaM+hyVQi8a4QZvxz/QIoaqE9iu26PAc5/SMmXYmtDfOgWbqbV1ERihFVbEjn/Odsf+y3jtgvzLQ741wMqX0ieGLFtDw=
addons:
  postgresql: '9.5'
services:
- rabbitmq
- postgresql:9.5
script: python3 manage.py migrate && coverage run --source='.' manage.py test fixit && coverage report --omit="*venv*"
notifications:
  slack:
    secure: nK/i8AFPNCjyk8jy4bVvocPuEZgEZ7fvApXkPPVrdk8+cWp48OUJUJ7VZkp0Tt6ulG0PBgTBuFYAeYWADzHjE9Iu+nfCcyFlxccD5VwTvh+pqJOp6sAAfPWKX8t0QFWpUMQ0lZs7ouJn5tUNM/rX275zqEmxVtJwNI5ezf6NK6L0JgfSuYf2qjv52bNHi8ayP0mybh5l/QtkdmSGQ/RzThAtAAD6yZr1VcTGktr63megCZgkyYhPpTWnjW4CxLW3lVFkSpSb0U+jh1eoS5gbSlA3E5/6V2UikqsP9ctjZwjE22H4cA5u4OxHUad/Pr6nlnBQeIf6KHtr+LYaerO95ROBuPnp07SDdobPmkglZWn81RDEjKinE/GimYCl2Iktkn6K7UoA4+yqruW6hTMN7cRck9kWvthiO1FS3VahvgIsIyl9b3EvQXBzRsQMsaPE22S+ktlVWPh6YN/+Tp0JEdkDmowQFKBT+OMHDNuK9BOP128c++wKoJd83kOGjTBA5XlGT3k+QE2uow6V3LIZ8+7cXgV9Q/uYLPXI6vxEe0p8TilRc8zgHCioFm9owOhE1/E08WdYSEGbfx6YmI3/Y7KlibNR8Doy1xP9Rhb4fVBVzUWbLm8t+pFoVLCT04aTasv9Gah+WW5U3rxjZOHEkmfNfiQMEwNWMCEZKQJN9VQ=
